<div class="podcast detail">
  <div class="header" flex="100" layout="row">
    <div layout="column">
      <img ng-src="https://images.bethel.io/images/{{ podcast.image ? podcast.image : 'DefaultPodcaster.png' }}?crop=faces&amp;fit=crop&amp;w=300&amp;h=300&amp;modified={{ podcast.updatedAt }}" alt="{{ podcast.name }}" ngf-select="uploadThumbnail($files)" accept="image/png,image/jpg,image/jpeg" width="150" height="150" />
      <md-button ng-show="!thumbnailUploading">Upload Image</md-button>
      <md-progress-circular md-diameter="86" md-mode="indeterminate" ng-show="thumbnailUploading"></md-progress-circular>
    </div>
    <div layout="column" flex>
      <md-menu md-position-mode="target-right target">
        <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" aria-label="Podcast Options">
          <md-icon md-menu-origin>settings</md-icon>
        </md-button>
        <md-menu-content width="4">
          <md-menu-item ng-if="podcast.source === 1">
            <md-button ng-click="openFileSelector()" ng-disabled="uploading">
              <div layout="row">
                <p flex>{{ uploading ? 'Upload in Progress' : 'Upload Episode' }}</p>
                <md-icon md-menu-align-target style="margin: auto 3px auto 0;">add</md-icon>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ng-click="viewPodcastUrl($event)">
              <div layout="row">
                <p flex>Podcast Feed URL</p>
                <md-icon md-menu-align-target style="margin: auto 3px auto 0;">link</md-icon>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ng-click="deletePodcast()">
              <div layout="row">
                <p flex>Delete Podcast</p>
                <md-icon md-menu-align-target style="margin: auto 3px auto 0;">delete</md-icon>
              </div>
            </md-button>
          </md-menu-item>
        </md-menu-content>
      </md-menu>

      <h1>{{ podcast.name }} <small>{{ podcast.type === 1 ? 'Audio' : 'Video' }} Podcast</small></h1>
      <p><ng-pluralize count="podcast.media.length" when="{ '0': 'No Episodes', '1': '1 podcast episode', 'other': '{} podcast episodes' }"></ng-pluralize>
        <span ng-if="uploading"> (1 uploading)</span>
        <span ng-if="podcast.source === 2"> from Vimeo account <strong>{{ podcast.service.name }}</strong>. <em>Last sync: <span am-time-ago="podcast.lastSync" ng-if="podcast.lastSync"></span><span ng-if="!podcast.lastSync">in progress</span></em></span></p>
    </div>
    <div class="statistics" layout="column">
      <md-card>
        <md-card-content>
          <strong>{{ subscriberCount | number }}</strong><br />
          <small>audience</small>
        </md-card-content>
      </md-card>
      <md-card ng-class="subscriberDifference > 0 ? 'good' : 'bad'" ng-if="subscriberPercentChange !== 0">
        <md-card-content>
          <strong>{{ subscriberPercentChange | number : 1 }}%</strong><br />
          <small>{{ subscriberDifference > 0 ? 'increase' : 'decrease' }}</small>
        </md-card-content>
      </md-card>
    </div>
  </div>

  <md-button class="md-fab md-fab-bottom-right md-hue-3" aria-label="Upload Episode" ngf-select="onFileSelect($files)" ng-if="podcast.source === 1 && !uploading" accept="audio/mp4,audio/x-m4a,audio/*,video/mp4,video/x-m4v,video/*">
    <md-tooltip md-direction="top">Upload Episode</md-tooltip>
    <md-icon>add</md-icon>
  </md-button>

  <div flex="100" class="episodes">

    <md-whiteframe class="md-whiteframe-z1" layout>
      <md-list class="episode-list" flex="100">
        <md-progress-linear md-mode="determinate" ng-if="uploading" value="{{ uploadProgress }}"></md-progress-linear>
        <md-list-item ng-if="podcast.media.length < 1">
          <p ng-if="!uploading && podcast.source === 1">Upload your first podcast episode using the <md-icon>add</md-icon> button above!</p>
          <p ng-if="podcast.source === 2 && !podcast.lastSync">We're pulling your videos from Vimeo now! They'll appear here shortly.</p>
          <p ng-if="podcast.source === 2 && podcast.lastSync">No videos matching the tags you've entered were found. Just uploaded a video? Your video will show up on the next sync.</p>
          <p ng-if="uploading">Way to go! Your first podcast episode is uploading...</p>
        </md-list-item>
        <md-list-item class="md-2-line md-no-proxy" layout="row" ng-repeat="media in podcast.media | orderBy : 'date' : true">
          <div class="md-list-item-text" flex-gt-lg="60" flex="50">
            <h3> {{ media.name }} </h3>
            <p am-time-ago="media.date"></p>
          </div>
          <div class="episode-tools" flex-gt-lg="40" flex="50">
            <md-button class="md-mini md-primary" ng-click="editMedia($event, media.id)">Edit</md-button>
            <md-button class="md-mini" ng-click="embedMedia($event, media.id)">Embed</md-button>
          </div>
          <md-divider ng-if="!$last"></md-divider>
        </md-list-item>
      </md-list>
    </md-whiteframe>

  </div>

  <!--

  <md-sidenav class="md-sidenav-right md-whiteframe-z1" layout="column" md-is-locked-open="$mdMedia('gt-sm')" flex="30">

    <md-content>

      <div layout="column" layout-margin>

        <span class="vimeo-sync" ng-if="podcast.source === 2">
          <h4>Podcast syncing with Vimeo<br />
            <small>Uploads with these tags will be included:</small></h4>
          <md-chips ng-model="podcast.sourceMeta"></md-chips>
        </span>

        <md-input-container>
          <label>Podcast title</label>
          <input type="text" ng-model="podcast.name" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }" />
        </md-input-container>

        <md-input-container>
          <label>Tags</label>
          <input type="text" ng-model="podcastTags" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }" />
        </md-input-container>

        <md-input-container>
          <label>Description</label>
          <textarea ng-model="podcast.description" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }" columns="1" rows="3" md-maxlength="4000"></textarea>
        </md-input-container>

      </div>

    </md-content>

  </md-sidenav>
  </div> -->
</div>
